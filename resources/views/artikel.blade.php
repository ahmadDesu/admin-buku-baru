<!doctype html>
<html lang="en">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">

    <title>Admin Buku</title>

</head>
<body style="background-color:#cfd1d4">

<div class="container" style="margin-top: 50px; margin-bottom: 50px;">

    <h4 class="text-center">Admin Buku Pemprograman</h4><br>

    <h5># Add Artikel</h5>
    <form id="addCustomer" method="POST" action="">
    <!-- Judul -->
    <div class="mb-3">
        <label for="judul" class="form-label">Judul</label>
        <input type="text" class="form-control" id="judul" name="judul" placeholder="Masukan Judul" required autofocus>
    </div>

    <!-- Link thumbnail -->
    <div class="mb-3">
        <label for="thumbnail" class="form-label">Thumbnail</label>
        <input type="text" class="form-control" id="thumbnail" name="thumbnail" placeholder="Link thumbnail" required autofocus>
    </div>

    <!-- Youtube -->
    <div class="mb-3">
        <label for="youtube" class="form-label">Youtube</label>
        <input type="text" class="form-control" id="id_yt" name="id_yt" placeholder="Link Youtube">
    </div>

    <!-- Konten 1 -->
    <div class="mb-3">
        <label for="konten1" class="form-label">Artikel 1</label>
        <input type="text" class="form-control" id="konten1" name="konten1" placeholder="Artikel 1">
    </div>

     <!-- Konten 2 -->
    <div class="mb-3">
        <label for="artikel2" class="form-label">Artikel 2</label>
        <input type="text" class="form-control" id="form" name="konten2" placeholder="Artikel 2">
    </div>
    <!-- Kode 2 -->
    <div class="mb-3">
        <label for="kode-2" class="form-label">Kode 2</label>
        <input type="text" class="form-control" id="form" name="code2" placeholder="Kode 2">
    </div>
    <!-- Foto konten 2 -->
    <div class="mb-3">
        <label for="foto_konten2" class="form-label">Foto konten 2</label>
        <input type="text" class="form-control" id="form" name="foto_konten2" placeholder="Link foto konten 2">
    </div>

    <!-- Konten 3 -->
    <div class="mb-3">
        <label for="artikel3" class="form-label">Artikel 3</label>
        <input type="text" class="form-control" id="form" name="konten3" placeholder="Artikel 3">
    </div>
    <!-- Kode 3  -->
    <div class="mb-3">
        <label for="kode-3" class="form-label">Kode 3</label>
        <input type="text" class="form-control" id="form" name="code3" placeholder="Kode 3">
    </div>
    <!-- Foto konten 3 -->
    <div class="mb-3">
        <label for="foto_konten3" class="form-label">Foto konten 3</label>
        <input type="text" class="form-control" id="form" name="foto_konten3" placeholder="Link foto konten 3">
    </div>

    <!-- Konten 4 -->
    <div class="mb-3">
        <label for="artikel4" class="form-label">Artikel 4</label>
        <input type="text" class="form-control" id="form" name="konten4" placeholder="Artikel 4">
    </div>
    <!-- Kode 4 -->
    <div class="mb-3">
        <label for="kode-4" class="form-label">Kode 4</label>
        <input type="text" class="form-control" id="form" name="code4" placeholder="Kode 4">
    </div>
    <!-- Foto konten 4 -->
    <div class="mb-3">
        <label for="foto_konten4" class="form-label">Foto konten 4</label>
        <input type="text" class="form-control" id="form" name="foto_konten4" placeholder="Link foto konten 4">
    </div>

     <!-- Konten 5  -->
    <div class="mb-3">
        <label for="artikel5" class="form-label">Artikel 5</label>
        <input type="text" class="form-control" id="form" name="konten5" placeholder="Artikel 5">
    </div>
     <!-- Kode 5  -->
    <div class="mb-3">
        <label for="kode-5" class="form-label">Kode 5</label>
        <input type="text" class="form-control" id="form" name="code5" placeholder="Kode 5">
    </div>
    <!-- Foto konten 5 -->
    <div class="mb-3">
        <label for="foto_konten5" class="form-label">Foto konten 5</label>
        <input type="text" class="form-control" id="form" name="foto_konten5" placeholder="Link foto konten 5">
    </div>

     <!-- Konten 6  -->
    <div class="mb-3">
        <label for="artikel6" class="form-label">Artikel 6</label>
        <input type="text" class="form-control" id="form" name="konten6" placeholder="Artikel 6">
    </div>
     <!-- Kode 6  -->
    <div class="mb-3">
        <label for="kode-6" class="form-label">Kode 6</label>
        <input type="text" class="form-control" id="form" name="code6" placeholder="Kode 6">
    </div>
    <!-- Foto konten 6 -->
    <div class="mb-3">
        <label for="foto_konten6" class="form-label">Foto konten 6</label>
        <input type="text" class="form-control" id="form" name="foto_konten6" placeholder="Link foto konten 6">
    </div>

     <!-- Konten 7  -->
    <div class="mb-3">
        <label for="artikel7" class="form-label">Artikel 7</label>
        <input type="text" class="form-control" id="form" name="konten7" placeholder="Artikel 7">
    </div>
     <!-- Kode 7  -->
    <div class="mb-3">
        <label for="kode-7" class="form-label">Kode 7</label>
        <input type="text" class="form-control" id="form" name="code7" placeholder="Kode 7">
    </div>
    <!-- Foto konten 7 -->
    <div class="mb-3">
        <label for="foto_konten7" class="form-label">Foto konten 7</label>
        <input type="text" class="form-control" id="form" name="foto_konten7" placeholder="Link foto konten 7">
    </div>

     <!-- Konten 8  -->
    <div class="mb-3">
        <label for="artikel8" class="form-label">Artikel 8</label>
        <input type="text" class="form-control" id="form" name="konten8" placeholder="Artikel 8">
    </div>
     <!-- Kode 8  -->
    <div class="mb-3">
        <label for="kode-8" class="form-label">Kode 8</label>
        <input type="text" class="form-control" id="form" name="code8" placeholder="Kode 8">
    </div>
    <!-- Foto konten 8 -->
    <div class="mb-3">
        <label for="foto_konten8" class="form-label">Foto konten 8</label>
        <input type="text" class="form-control" id="form" name="foto_konten8" placeholder="Link foto konten 8">
    </div>

     <!-- Konten 9  -->
    <div class="mb-3">
        <label for="artikel9" class="form-label">Artikel 9</label>
        <input type="text" class="form-control" id="form" name="konten9" placeholder="Artikel 9">
    </div>
    <input id="uid" name="uid" type="hidden" value="{{ \Session::get('uid') }}" class="form-control ">
    <button id="submitArtikel" type="button"  class="btn btn-primary mb-2">Submit</button>
    </form>


    

{{--Firebase Tasks--}}
<script src="https://code.jquery.com/jquery-3.4.0.min.js"></script>
<script src="https://www.gstatic.com/firebasejs/5.10.1/firebase.js"></script>
<script>
    // Initialize Firebase
    var config = {
        apiKey: "{{ config('services.firebase.api_key') }}",
        authDomain: "{{ config('services.firebase.auth_domain') }}",
        databaseURL: "{{ config('services.firebase.database_url') }}",
        storageBucket: "{{ config('services.firebase.storage_bucket') }}",
    };
    firebase.initializeApp(config);
    var database = firebase.database();
    var lastIndex = 0;
    // Get Data
    firebase.database().ref('Buku_Pemprograman/').on('value', function (snapshot) {
        var value = snapshot.val();
        var htmls = [];
        $.each(value, function (index, value) {
            if (value) {
                htmls.push('<tr>\
        		<td>' + value.judul + '</td>\
                <td>' + value.thumbnail + '</td>\
                <td>' + value.id_yt + '</td>\
        		<td>' + value.konten1 + '</td>\
                <td>' + value.konten2 + '</td>\
                <td>' + value.konten3 + '</td>\
                <td>' + value.konten4 + '</td>\
                <td>' + value.konten5 + '</td>\
                <td>' + value.konten6 + '</td>\
                <td>' + value.konten7 + '</td>\
                <td>' + value.konten8 + '</td>\
                <td>' + value.konten9 + '</td>\
                <td>' + value.code2 + '</td>\
                <td>' + value.code3 + '</td>\
                <td>' + value.code4 + '</td>\
                <td>' + value.code5 + '</td>\
                <td>' + value.code6 + '</td>\
                <td>' + value.code7 + '</td>\
                <td>' + value.code8 + '</td>\
                <td>' + value.foto_konten2 + '</td>\
                <td>' + value.foto_konten3 + '</td>\
                <td>' + value.foto_konten4 + '</td>\
                <td>' + value.foto_konten5 + '</td>\
                <td>' + value.foto_konten6 + '</td>\
                <td>' + value.foto_konten7 + '</td>\
                <td>' + value.foto_konten8 + '</td>\
        		<td><button data-toggle="modal" data-target="#update-modal" class="btn btn-info updateData" data-id="' + index + '">Update</button>\
        		<button data-toggle="modal" data-target="#remove-modal" class="btn btn-danger removeData" data-id="' + index + '">Delete</button></td>\
        	</tr>');
            }
            lastIndex = index;
        });
        $('#tbody').html(htmls);
        $("#submitUser").removeClass('desabled');
    });
    // Add Data
    $('#submitArtikel').on('click', function () {
        var values = $("#addCustomer").serializeArray();
        var judul = values[0].value;
        var thumbnail = values[1].value;
        var id_yt = values[2].value;

        var konten1 = values[3].value;

        var konten2 = values[4].value;
        var code2 = values[5].value;
        var foto_konten2 = values[6].value;

        var konten3 = values[7].value;
        var code3 = values[8].value;
        var foto_konten3 = values[9].value;

        var konten4 = values[10].value;
        var code4 = values[11].value;
        var foto_konten4 = values[12].value;

        var konten5 = values[13].value;
        var code5 = values[14].value;
        var foto_konten5 = values[15].value;

        var konten6 = values[16].value;
        var code6 = values[17].value;
        var foto_konten6 = values[18].value;

        var konten7 = values[19].value;
        var code7 = values[20].value;
        var foto_konten7 = values[21].value;

        var konten8 = values[22].value;
        var code8 = values[23].value;
        var foto_konten8 = values[24].value;

        var konten9 = values[25].value;

        var userID = lastIndex + 1;
        console.log(values);
        // Disini kita menambahkan nama untuk folder di database
        firebase.database().ref('Buku_Pemprograman/' + userID).set({
            judul: judul,
            id_yt: id_yt,
            thumbnail: thumbnail,
            konten1: konten1,
            konten2: konten2,
            konten3: konten3,
            konten4: konten4,
            konten5: konten5,
            konten6: konten6,
            konten7: konten7,
            konten8: konten8,
            konten9: konten9,
            code2: code2,
            code3: code3,
            code4: code4,
            code5: code5,
            code6: code6,
            code7: code7,
            code8: code8,
            foto_konten2: foto_konten2,
            foto_konten3: foto_konten3,
            foto_konten4: foto_konten4,
            foto_konten5: foto_konten5,
            foto_konten6: foto_konten6,
            foto_konten7: foto_konten7,
            foto_konten8: foto_konten8,
        });
        // Reassign lastID value
        lastIndex = userID;
        $("#addCustomer input").val("");
    });
    
    
</script>

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

</body>
</html>